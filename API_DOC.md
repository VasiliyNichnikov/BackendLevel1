# Документация к Backend приложению. Level 1.
## МИРЭА

---
В данном репозитории хранятся две папки.
Первая служит сервером (Backend), а вторая клиентским приложением (Client). Так же на OS windows вы можете запустить
файл ***main.exe***, вместо запуска скрипта ***Main.py***. Так же если в приложении нужно указать верный ***host*** и ***port***
**По умолчанию host: localhost, port: 8000**

**НО ОБЯЗАТЕЛЬНО ФАЙЛ "main.exe" ДОЛЖЕН БЫТЬ ЗАПУЩЕН ИЗ ПАПКИ Client**

1. Сервер написан на python с использованием библиотеки flask.
2. Клиентское приложение написано также на python с использованием библиотеки PyQt5

В данной документации будут приведены примеры запросов на сервер.

---

### Регистрация нового аккаунта
Для регистрации нового аккаунта передать на сервер следующие параметры:
1. ***login*** (Логин пользователя)
2. ***password*** (Пароль пользователя)

Адрес запроса - http://host:port/register_user

Параметры json:
```json
{
    "login": "test",
    "password": "test_password"
}
```
В случае успеха, сервер вернет ключ пользователя.

---

### Логирование пользователя
Для входа в систему передать на сервер следующие параметры:
1. ***login*** (Логин пользователя)
2. ***password*** (Пароль пользователя)

Адрес запроса - http://host:port/login_user

Параметры json:
```json
{
    "login": "test",
    "password": "test_password"
}
```
В случае успеха вернется ключ пользователя.

---

### Добавление продукта
Для добавления продукта, нужно передать на сервер следующие параметры:
1. key_user (Ключ пользователя, можно получить при регистрации или при входе в систему)
2. date_purchase (Дата покупки, формат должен быть следующий: **год-месяц-деньTчасы:минуты:секунды**)
3. name_product (Название продукта)
4. price_product (Цена продукта, **ОБЯЗАТЕЛЬНО:** тип должен быть float)

Адрес запроса - http://host:port/add_product
Параметры json:
```json
{
    "key_user": "key_user",
    "date_purchase": "2021-03-16T00:00:00",
    "name_product": "Cake",
    "price_product": 500.0
}
```
В случае успеха вернется id продукта в базе данных.

---

### Редактирование продукта
Для редактирования продукта, нужно передать на сервер следующие параметры:
1. ***key_user*** (Ключ пользователя, можно получить при регистрации или при входе в систему)
2. ***id_product*** (id продукта) 
3. ***date_purchase*** (Дата покупки, формат должен быть следующий: **год-месяц-деньTчасы:минуты:секунды**)
4. ***name_product*** (Название продукта)
5. ***price_product*** (Цена продукта, **ОБЯЗАТЕЛЬНО:** тип должен быть float)

Адрес запроса - http://host:port/edit_product

Параметры json:
```json
{
    "key_user": "key_user",
    "id_product": 6,
    "date_purchase": "2021-03-25T00:00:00",
    "name_product": "Apple",
    "price_product": 156.5
}
```
В случае успеха вернется сообщение, что продукт изменен.

---

### Получение списка продуктов
Для получения всех продуктов, которые есть у пользователя, нужно передать на сервер следующий параметр:
1. ***key_user*** (Ключ пользователя, можно получить при регистрации или при входе в систему)

Адрес запроса - http://host:port/get_list_products

```json
{
    "key_user": "key_user"
}
```
В случае успеха вернется список со всеми продуктами пользователя.

---

### Удаление продукта
Для удаления продукта нужно передать на сервер следующие параметры:
1. ***key_user*** (Ключ пользователя, можно получить при регистрации или при входе в систему)
2. ***id_product*** (id продукта можно получить при добавлении продукта или при получении всех продуктов пользователя)

Адрес запроса - http://host:port/delete_product

```json
{
    "key_user": "key_user",
    "id_product": 6
}
```
В случае успеха вернется сообщение, что продукт удален.

---

### Удаление аккаунта пользователя

Для удаления аккаунта пользователя нужно передать на сервер следующий параметры:
1. ***key_user*** (Ключ пользователя, можно получить при регистрации или при входе в систему)

Адрес запроса - http://host:port/delete_user

```json
{
    "key_user": "key_user"
}
```
В случае успеха вернется сообщение, что аккаунт пользователя удален.

---
